<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Panel - Rafi University</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
          theme: {
            extend: {
              colors: {
                'brand-dark-green': '#006336',
                'brand-light-green': '#67B446',
                'brand-off-white': '#EDE6DB',
              }
            }
          }
        }
    </script>
    <style>
        body { font-family: 'Inter', sans-serif; }
        .label {
            @apply block text-sm font-medium text-gray-700 mb-1;
        }
        .input, .textarea {
            @apply mt-1 block w-full px-4 py-2 bg-gray-100/50 border border-gray-300 rounded-lg shadow-sm placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-brand-dark-green focus:border-transparent sm:text-sm transition-all;
        }
        .textarea {
            min-height: 120px;
        }
        /* Sidebar styles */
        .sidebar-link {
            @apply flex items-center px-4 py-2.5 text-gray-600 rounded-lg hover:bg-brand-dark-green/10 hover:text-brand-dark-green transition-colors duration-200;
        }
        .sidebar-link.active {
            @apply bg-brand-dark-green text-white font-semibold shadow-md;
        }
        .sidebar-link svg {
             @apply transition-transform duration-200;
        }
        .sidebar-link.active svg {
            transform: scale(1.1);
        }
        /* Main content panel display logic */
        .content-panel {
            display: none;
            animation: fadeIn 0.5s ease-in-out;
        }
        .content-panel.active {
            display: block;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .login-bg-gradient {
            background: linear-gradient(135deg, #006336 0%, #004d2a 100%);
        }
    </style>
</head>
<body class="bg-gray-50 text-gray-800">

    <!-- Login Screen -->
    <div id="auth-screen" class="min-h-screen flex items-center justify-center bg-brand-off-white/40 p-4">
        <div class="w-full max-w-5xl min-h-[600px] bg-white shadow-2xl rounded-2xl flex flex-col md:flex-row overflow-hidden" data-aos="zoom-in" data-aos-duration="600">
            <!-- Visual Side -->
            <div class="w-full md:w-1/2 p-8 md:p-12 flex flex-col justify-center items-center text-white login-bg-gradient">
                <div class="text-center" data-aos="fade-right" data-aos-delay="200">
                    <img src="https://i.ibb.co/r2tP3wzb/Blue-Modern-Initials_Letter_A_University_Logo.png" alt="Logo" class="h-20 w-20 rounded-full mx-auto mb-6 border-4 border-white/50">
                    <h1 class="text-4xl font-extrabold mb-3">Welcome Back</h1>
                    <p class="text-white/80 max-w-sm mx-auto">Manage your university's content with ease and precision.</p>
                </div>
            </div>
            <!-- Form Side -->
            <div class="w-full md:w-1/2 p-8 md:p-12 flex flex-col justify-center">
                 <div class="max-w-md w-full mx-auto" data-aos="fade-left" data-aos-delay="200">
                    <div class="mb-8 text-center md:text-left">
                        <h2 class="text-3xl font-bold text-gray-900">
                            Admin Login
                        </h2>
                         <p class="mt-2 text-sm text-gray-600">Enter your credentials to access the dashboard.</p>
                    </div>
                    <form class="space-y-6" onsubmit="return false;">
                        <div>
                            <label for="email" class="label">Email Address</label>
                            <input id="email" name="email" type="email" autocomplete="email" required class="input" placeholder="admin@example.com">
                        </div>
                        <div>
                            <label for="password" class="label">Password</label>
                            <input id="password" name="password" type="password" autocomplete="current-password" required class="input" placeholder="••••••••">
                        </div>
                        <div>
                            <button id="login-button" class="group relative w-full flex justify-center py-3 px-4 mt-4 border border-transparent text-sm font-medium rounded-lg text-white bg-brand-dark-green hover:bg-green-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-brand-dark-green transition-all transform hover:scale-105 active:scale-100 shadow-lg hover:shadow-xl">
                                Sign in
                            </button>
                            <p id="auth-error" class="text-red-500 text-sm mt-3 text-center"></p>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>


    <!-- Main Admin Panel -->
    <div id="admin-panel" class="hidden">
        <div class="flex h-screen bg-brand-off-white/40">
            <!-- Sidebar -->
            <aside class="w-72 bg-white shadow-lg flex-shrink-0 flex flex-col">
                <div class="p-6 flex items-center space-x-4 border-b">
                    <img src="https://i.ibb.co/r2tP3wzb/Blue-Modern-Initials_Letter_A_University_Logo.png" alt="Logo" class="h-12 w-12 rounded-full">
                    <div>
                        <span class="text-xl font-bold text-gray-800">Admin Panel</span>
                        <p class="text-xs text-gray-500">Rafi University</p>
                    </div>
                </div>
                <nav id="sidebar-nav" class="p-4 space-y-2 flex-1">
                    <a href="#dashboard" class="sidebar-link active" data-target="panel-dashboard">
                        <svg class="h-5 w-5 mr-3" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z" /></svg>
                        Dashboard
                    </a>
                    <a href="#hero" class="sidebar-link" data-target="panel-hero">
                        <svg class="h-5 w-5 mr-3" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 5a1 1 0 011-1h14a1 1 0 011 1v2a1 1 0 01-1 1H5a1 1 0 01-1-1V5zM4 13a1 1 0 011-1h6a1 1 0 011 1v6a1 1 0 01-1 1H5a1 1 0 01-1-1v-6zM16 13a1 1 0 011-1h2a1 1 0 011 1v6a1 1 0 01-1 1h-2a1 1 0 01-1-1v-6z" /></svg>
                        Hero
                    </a>
                    <a href="#about" class="sidebar-link" data-target="panel-about">
                         <svg class="h-5 w-5 mr-3" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" /></svg>
                        About Us
                    </a>
                     <a href="#notice" class="sidebar-link" data-target="panel-notice">
                        <svg class="h-5 w-5 mr-3" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 20h6M12 4v16m0 0l-4-4m4 4l4-4" /></svg>
                        Notice Board
                    </a>
                    <a href="#leadership" class="sidebar-link" data-target="panel-leadership">
                         <svg class="h-5 w-5 mr-3" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M15 21a6 6 0 00-9-5.197M15 11a3 3 0 11-6 0 3 3 0 016 0z" /></svg>
                        Leadership
                    </a>
                    <a href="#vision" class="sidebar-link" data-target="panel-vision">
                        <svg class="h-5 w-5 mr-3" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" /><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z" /></svg>
                        Vision & Mission
                    </a>
                    <a href="#stats" class="sidebar-link" data-target="panel-stats">
                        <svg class="h-5 w-5 mr-3" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 3.055A9.001 9.001 0 1020.945 13H11V3.055z" /><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.488 9H15V3.512A9.025 9.025 0 0120.488 9z" /></svg>
                        Statistics
                    </a>
                    <a href="#features" class="sidebar-link" data-target="panel-features">
                        <svg class="h-5 w-5 mr-3" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01" /></svg>
                        Features
                    </a>
                    <a href="#gallery" class="sidebar-link" data-target="panel-gallery">
                        <svg class="h-5 w-5 mr-3" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z" /></svg>
                        Gallery
                    </a>
                </nav>
                <div class="p-4 mt-auto border-t">
                     <button id="logout-button" class="w-full flex items-center justify-center px-4 py-2.5 text-sm font-medium rounded-lg text-white bg-red-600 hover:bg-red-700 transition-all transform hover:scale-105">
                        <svg class="h-5 w-5 mr-2" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1" /></svg>
                        Logout
                    </button>
                </div>
            </aside>

            <!-- Main Content -->
            <main class="flex-1 overflow-y-auto p-4 md:p-8 relative">
                <div id="notification-bar" class="hidden sticky top-4 z-20 p-4 mb-4 text-sm text-white rounded-lg shadow-lg transition-all duration-300" role="alert">
                    <span id="notification-message"></span>
                </div>
                 <form id="content-form">
                    <!-- Dashboard Panel -->
                    <div id="panel-dashboard" class="content-panel active" data-aos="fade-up">
                        <div class="p-6 bg-white rounded-2xl shadow-lg mb-8">
                            <h1 id="welcome-greeting" class="text-3xl font-bold text-gray-900">Good Morning!</h1>
                            <p class="text-gray-600 mt-1">Here's a quick overview of your website's content.</p>
                        </div>
                        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                            <div class="bg-white p-6 rounded-2xl shadow-lg flex items-center justify-between">
                                <div>
                                    <p class="text-sm font-medium text-gray-500">Total Notices</p>
                                    <p id="notice-count" class="text-3xl font-bold text-brand-dark-green">0</p>
                                </div>
                                <div class="bg-brand-light-green/20 p-3 rounded-full">
                                    <svg class="h-6 w-6 text-brand-light-green" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 20h6M12 4v16m0 0l-4-4m4 4l4-4" /></svg>
                                </div>
                            </div>
                             <div class="bg-white p-6 rounded-2xl shadow-lg flex items-center justify-between">
                                <div>
                                    <p class="text-sm font-medium text-gray-500">Gallery Images</p>
                                    <p id="gallery-count" class="text-3xl font-bold text-brand-dark-green">0</p>
                                </div>
                                 <div class="bg-brand-light-green/20 p-3 rounded-full">
                                    <svg class="h-6 w-6 text-brand-light-green" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z" /></svg>
                                </div>
                            </div>
                             <div class="bg-white p-6 rounded-2xl shadow-lg flex items-center justify-between">
                                <div>
                                    <p class="text-sm font-medium text-gray-500">Special Features</p>
                                    <p id="feature-count" class="text-3xl font-bold text-brand-dark-green">0</p>
                                </div>
                                <div class="bg-brand-light-green/20 p-3 rounded-full">
                                    <svg class="h-6 w-6 text-brand-light-green" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" /></svg>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Hero Section Panel -->
                    <div id="panel-hero" class="content-panel bg-white p-8 rounded-2xl shadow-lg" data-aos="fade-up">
                        <h2 class="text-2xl font-bold mb-6 border-b pb-4 text-gray-900">Hero Section</h2>
                        <div class="space-y-6">
                            <div><label for="heroTitle" class="label">Hero Title</label><input type="text" id="heroTitle" class="input"></div>
                            <div><label for="carouselImages" class="label">Carousel Image URLs (one per line)</label><textarea id="carouselImages" class="textarea"></textarea></div>
                        </div>
                    </div>

                    <!-- About Us Section Panel -->
                    <div id="panel-about" class="content-panel bg-white p-8 rounded-2xl shadow-lg" data-aos="fade-up">
                        <h2 class="text-2xl font-bold mb-6 border-b pb-4 text-gray-900">About Us Section</h2>
                        <div class="space-y-6">
                            <div><label for="aboutUsImage" class="label">Image URL</label><input type="text" id="aboutUsImage" class="input"></div>
                            <div><label for="aboutUsText" class="label">About Us Text</label><textarea id="aboutUsText" class="textarea"></textarea></div>
                        </div>
                    </div>

                    <!-- Notice Board Panel -->
                    <div id="panel-notice" class="content-panel bg-white p-8 rounded-2xl shadow-lg" data-aos="fade-up">
                        <div class="flex justify-between items-center mb-6 border-b pb-4">
                            <h2 class="text-2xl font-bold text-gray-900">Notice Board</h2>
                            <button type="button" id="add-notice-button" class="px-4 py-2 bg-brand-light-green text-white font-semibold rounded-lg hover:bg-green-600 transition-all transform hover:scale-105 shadow-md">Add Notice</button>
                        </div>
                        <div id="notice-container" class="space-y-6">
                            <!-- Notice items will be dynamically added here -->
                        </div>
                    </div>


                     <!-- Leadership Section Panel -->
                    <div id="panel-leadership" class="content-panel bg-white p-8 rounded-2xl shadow-lg" data-aos="fade-up">
                        <h2 class="text-2xl font-bold mb-6 border-b pb-4 text-gray-900">Leadership Messages</h2>
                        <div class="grid md:grid-cols-2 gap-8">
                            <div class="p-6 bg-gray-50 rounded-xl border">
                                <h3 class="text-lg font-semibold mb-4">Principal's Message</h3>
                                <div class="space-y-4">
                                    <div><label for="principalName" class="label">Name</label><input type="text" id="principalName" class="input"></div>
                                    <div><label for="principalTitle" class="label">Title</label><input type="text" id="principalTitle" class="input"></div>
                                    <div><label for="principalImage" class="label">Image URL</label><input type="text" id="principalImage" class="input"></div>
                                    <div><label for="principalMessage" class="label">Message</label><textarea id="principalMessage" class="textarea"></textarea></div>
                                </div>
                            </div>
                            <div class="p-6 bg-gray-50 rounded-xl border">
                                <h3 class="text-lg font-semibold mb-4">Director's Message</h3>
                                <div class="space-y-4">
                                    <div><label for="directorName" class="label">Name</label><input type="text" id="directorName" class="input"></div>
                                    <div><label for="directorTitle" class="label">Title</label><input type="text" id="directorTitle" class="input"></div>
                                    <div><label for="directorImage" class="label">Image URL</label><input type="text" id="directorImage" class="input"></div>
                                    <div><label for="directorMessage" class="label">Message</label><textarea id="directorMessage" class="textarea"></textarea></div>
                                </div>
                            </div>
                        </div>
                    </div>

                     <!-- Vision & Mission Section Panel -->
                    <div id="panel-vision" class="content-panel bg-white p-8 rounded-2xl shadow-lg" data-aos="fade-up">
                        <h2 class="text-2xl font-bold mb-6 border-b pb-4 text-gray-900">Vision & Mission</h2>
                         <div class="grid md:grid-cols-2 gap-8">
                            <div class="p-6 bg-gray-50 rounded-xl border">
                                <h3 class="text-lg font-semibold mb-4">Our Vision</h3>
                                <div class="space-y-4">
                                    <div><label for="visionImage" class="label">Image URL</label><input type="text" id="visionImage" class="input"></div>
                                    <div><label for="visionText" class="label">Text</label><textarea id="visionText" class="textarea"></textarea></div>
                                </div>
                            </div>
                            <div class="p-6 bg-gray-50 rounded-xl border">
                                <h3 class="text-lg font-semibold mb-4">Our Mission</h3>
                                <div class="space-y-4">
                                    <div><label for="missionImage" class="label">Image URL</label><input type="text" id="missionImage" class="input"></div>
                                    <div><label for="missionText" class="label">Text</label><textarea id="missionText" class="textarea"></textarea></div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Statistics Panel -->
                    <div id="panel-stats" class="content-panel bg-white p-8 rounded-2xl shadow-lg" data-aos="fade-up">
                        <h2 class="text-2xl font-bold mb-6 border-b pb-4 text-gray-900">Statistics</h2>
                         <div class="grid md:grid-cols-2 gap-8">
                             <div class="p-6 bg-gray-50 rounded-xl border">
                                <h3 class="text-lg font-semibold mb-4">Total Students Stat</h3>
                                <div class="space-y-4">
                                    <div><label for="statsStudentsNumber" class="label">Number (e.g., 550+)</label><input type="text" id="statsStudentsNumber" class="input"></div>
                                    <div><label for="statsStudentsText" class="label">Text</label><textarea id="statsStudentsText" class="textarea"></textarea></div>
                                </div>
                            </div>
                             <div class="p-6 bg-gray-50 rounded-xl border">
                                <h3 class="text-lg font-semibold mb-4">Passout Students Stat</h3>
                                <div class="space-y-4">
                                    <div><label for="statsPassoutNumber" class="label">Number (e.g., 36)</label><input type="text" id="statsPassoutNumber" class="input"></div>
                                    <div><label for="statsPassoutText" class="label">Text</label><textarea id="statsPassoutText" class="textarea"></textarea></div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Features Panel -->
                     <div id="panel-features" class="content-panel bg-white p-8 rounded-2xl shadow-lg" data-aos="fade-up">
                        <h2 class="text-2xl font-bold mb-6 border-b pb-4 text-gray-900">Special Features</h2>
                         <div class="p-6 bg-gray-50 rounded-xl border">
                            <h3 class="text-lg font-semibold mb-4">Feature List (one per line)</h3>
                            <textarea id="features" class="textarea" placeholder="Qualified and experienced teachers.&#10;Disciplined and quality education."></textarea>
                        </div>
                    </div>

                    <!-- Gallery Panel -->
                    <div id="panel-gallery" class="content-panel bg-white p-8 rounded-2xl shadow-lg" data-aos="fade-up">
                        <h2 class="text-2xl font-bold mb-6 border-b pb-4 text-gray-900">Gallery</h2>
                        <div class="p-6 bg-gray-50 rounded-xl border">
                           <h3 class="text-lg font-semibold mb-4">Image URLs (one per line)</h3>
                           <textarea id="galleryImages" class="textarea" placeholder="https://example.com/image1.jpg&#10;https://example.com/image2.jpg"></textarea>
                       </div>
                   </div>
                    
                    <!-- Save Button Footer -->
                    <div class="mt-8 flex justify-end pt-6 border-t border-gray-300 sticky bottom-0 bg-brand-off-white/80 backdrop-blur-sm py-4 px-8 -mx-8">
                        <button type="submit" id="save-button" class="w-48 h-12 flex items-center justify-center px-6 py-3 bg-brand-dark-green text-white font-bold rounded-lg shadow-lg hover:bg-green-800 focus:outline-none focus:ring-2 focus:ring-brand-dark-green focus:ring-offset-2 transition-all transform hover:scale-105">
                            <span class="button-text">Save Changes</span>
                            <svg class="h-5 w-5 ml-2 button-icon-saving hidden animate-spin" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h5" /><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 20v-5h-5" /><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 12a8 8 0 018-8h0a8 8 0 018 8v0a8 8 0 01-8 8h-4" /></svg>
                             <svg class="h-6 w-6 button-icon-saved hidden" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" /></svg>
                        </button>
                    </div>
                </form>
            </main>
        </div>
    </div>

    <!-- Firebase SDK -->
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        import { getAuth, signInWithEmailAndPassword, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";
        import { getFirestore, doc, getDoc, setDoc } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";

        const firebaseConfig = {
          apiKey: "AIzaSyBXbw-Wypnh5Pr3nphN4dns8T6PR0zGn-8",
          authDomain: "rafi-8ef30.firebaseapp.com",
          projectId: "rafi-8ef30",
          storageBucket: "rafi-8ef30.firebasestorage.app",
          messagingSenderId: "1011445248713",
          appId: "1:1011445248713:web:30cd818a0d9f077b8a5318",
          measurementId: "G-74V0PZVWR4"
        };
        
        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const db = getFirestore(app);
        const contentRef = doc(db, "websiteContent", "mainPage");

        const authScreen = document.getElementById('auth-screen');
        const adminPanel = document.getElementById('admin-panel');
        
        // --- Notification Logic ---
        const notificationBar = document.getElementById('notification-bar');
        const notificationMessage = document.getElementById('notification-message');
        let notificationTimeout;

        function showNotification(message, isError = false) {
            if (notificationTimeout) clearTimeout(notificationTimeout);
            
            notificationMessage.textContent = message;
            notificationBar.classList.remove('hidden', 'bg-red-600', 'bg-green-600', 'opacity-0');
            notificationBar.classList.add(isError ? 'bg-red-600' : 'bg-green-600');
            
            notificationTimeout = setTimeout(() => {
                notificationBar.classList.add('opacity-0');
                setTimeout(() => notificationBar.classList.add('hidden'), 300);
            }, 4000);
        }

        function setGreeting() {
            const hour = new Date().getHours();
            const greetingEl = document.getElementById('welcome-greeting');
            if (hour < 12) {
                greetingEl.textContent = 'Good Morning!';
            } else if (hour < 18) {
                greetingEl.textContent = 'Good Afternoon!';
            } else {
                greetingEl.textContent = 'Good Evening!';
            }
        }
        
        function updateDashboardStats(data) {
            document.getElementById('notice-count').textContent = data.notices?.length || 0;
            document.getElementById('gallery-count').textContent = data.galleryImages?.length || 0;
            document.getElementById('feature-count').textContent = data.features?.length || 0;
        }

        onAuthStateChanged(auth, user => {
            if (user) {
                setGreeting();
                authScreen.style.display = 'none';
                adminPanel.style.display = 'block';
                loadContent();
            } else {
                authScreen.style.display = 'flex';
                adminPanel.style.display = 'none';
            }
        });

        document.getElementById('login-button').addEventListener('click', async () => {
            const email = document.getElementById('email').value;
            const password = document.getElementById('password').value;
            const errorEl = document.getElementById('auth-error');
            errorEl.textContent = '';
            try {
                await signInWithEmailAndPassword(auth, email, password);
            } catch (error) {
                console.error("Login failed:", error);
                errorEl.textContent = 'Login failed. Please check your credentials.';
            }
        });

        document.getElementById('logout-button').addEventListener('click', () => {
            signOut(auth);
        });

        const noticeContainer = document.getElementById('notice-container');
        document.getElementById('add-notice-button').addEventListener('click', () => createNoticeItem());
        
        function createNoticeItem(notice = { title: '', description: '', image: '' }) {
            const noticeId = `notice-${Date.now()}`;
            const noticeElement = document.createElement('div');
            noticeElement.id = noticeId;
            noticeElement.className = 'p-6 border rounded-xl bg-gray-50 notice-item';
            noticeElement.innerHTML = `
                <div class="flex justify-between items-center mb-4">
                    <h3 class="text-lg font-semibold">New Notice</h3>
                    <button type="button" class="px-3 py-1 bg-red-500 text-white rounded-md text-sm hover:bg-red-600 remove-notice-button transition-all transform hover:scale-105">Remove</button>
                </div>
                <div class="space-y-4">
                    <div><label class="label">Title</label><input type="text" class="input notice-title" value="${notice.title}"></div>
                    <div><label class="label">Description</label><textarea class="textarea notice-description">${notice.description}</textarea></div>
                    <div><label class="label">Image URL</label><input type="text" class="input notice-image" value="${notice.image}"></div>
                </div>
            `;
            noticeContainer.appendChild(noticeElement);
            noticeElement.querySelector('.remove-notice-button').addEventListener('click', () => noticeElement.remove());
        }

        async function loadContent() {
            try {
                const docSnap = await getDoc(contentRef);
                if (docSnap.exists()) {
                    const data = docSnap.data();
                    updateDashboardStats(data);
                    noticeContainer.innerHTML = '';
                    for (const key in data) {
                        if (key === 'notices' && Array.isArray(data[key])) {
                             data.notices.forEach(notice => createNoticeItem(notice));
                        } else {
                            const el = document.getElementById(key);
                            if (el) {
                               if (Array.isArray(data[key])) {
                                    el.value = data[key].join('\n');
                                } else {
                                    el.value = data[key];
                                }
                            }
                        }
                    }
                } else {
                    console.log("No content document yet. Saving will create it.");
                    showNotification("No content found. Fill out the form and save to create it.");
                }
            } catch (error) {
                console.error("Error loading content:", error);
                showNotification("Could not load content. Check console for errors.", true);
            }
        }
        
        document.getElementById('content-form').addEventListener('submit', async (e) => {
            e.preventDefault();
            const saveButton = document.getElementById('save-button');
            const buttonText = saveButton.querySelector('.button-text');
            const savingIcon = saveButton.querySelector('.button-icon-saving');
            const savedIcon = saveButton.querySelector('.button-icon-saved');
            
            buttonText.textContent = 'Saving...';
            savingIcon.classList.remove('hidden');
            savedIcon.classList.add('hidden');
            saveButton.disabled = true;

            const dataToSave = {};
            const formInputs = document.querySelectorAll('.input, .textarea');
            formInputs.forEach(input => {
                if(input.id && !input.classList.contains('notice-title') && !input.classList.contains('notice-description') && !input.classList.contains('notice-image')) {
                    if (input.tagName.toLowerCase() === 'textarea' && (input.id === 'carouselImages' || input.id === 'features' || input.id === 'galleryImages')) {
                        dataToSave[input.id] = input.value.split('\n').filter(line => line.trim() !== '');
                    } else {
                        dataToSave[input.id] = input.value;
                    }
                }
            });

            dataToSave.notices = [];
            document.querySelectorAll('.notice-item').forEach(item => {
                const title = item.querySelector('.notice-title').value;
                const description = item.querySelector('.notice-description').value;
                const image = item.querySelector('.notice-image').value;
                if (title || description || image) {
                    dataToSave.notices.push({ title, description, image });
                }
            });
            
            try {
                await setDoc(contentRef, dataToSave);
                updateDashboardStats(dataToSave); 
                buttonText.textContent = 'Saved!';
                savedIcon.classList.remove('hidden');
                showNotification("Content saved successfully!");
            } catch (error) {
                console.error("Error saving content:", error);
                buttonText.textContent = 'Error!';
                showNotification("Failed to save content. Check console for details.", true);
            } finally {
                savingIcon.classList.add('hidden');
                setTimeout(() => {
                    buttonText.textContent = 'Save Changes';
                    savedIcon.classList.add('hidden');
                    saveButton.disabled = false;
                }, 2000);
            }
        });
        
        const sidebarLinks = document.querySelectorAll('.sidebar-link');
        const contentPanels = document.querySelectorAll('.content-panel');

        sidebarLinks.forEach(link => {
            link.addEventListener('click', (e) => {
                e.preventDefault();
                sidebarLinks.forEach(l => l.classList.remove('active'));
                link.classList.add('active');
                const targetId = link.getAttribute('data-target');
                contentPanels.forEach(panel => {
                    panel.classList.toggle('active', panel.id === targetId);
                });
            });
        });
    </script>
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    <script>
        AOS.init({ once: true, duration: 600 });
    </script>
</body>
</html>
